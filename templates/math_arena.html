<!DOCTYPE html>
<html>
<head>
    <title>Math Arena Lobby</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='arena_setup.css') }}">
    <style>
        body {
            background-color: #dce6f1; /* Light greyish blue */
            font-family: Arial, sans-serif;
            margin: 0;
        }
        .arena-button {
            width: 180px; /* Increased width by 20% */
            height: 60px; /* Increased height by 20% */
            margin: 10px;
            border-radius: 5px;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }
        .room1 { background-color: #3498db; }
        .room2 { background-color: #e74c3c; }
        .room3 { background-color: #9b59b6; }
        .room4 { background-color: #f39c12; }
        .room5 { background-color: #16823e; }
    </style>
</head>
<body>
    <div class="banner" style="display: flex; width: 100%; height: 50px; background-color: #333; color: white; align-items: center;">
        <div class="banner-section" style="flex: 1; text-align: center; cursor: pointer;" onclick="window.location.href='/main_landing'" title="Back to Home">Home</div>
        <div class="banner-section" style="flex: 1; text-align: center; cursor: pointer;" onclick="window.location.href='/logout'">Logout</div>
    </div>
    <div style="background-color: yellow; text-align: center; padding: 5px;">
        WARNING: Math Arena is currently under construction and may not work correctly.
    </div>
    <h1 style="text-align: center; margin-top: 60px; margin-bottom: 40px;">Math Arena Lobby</h1>
    {% if error_message %}
        <p style="color: red; text-align: center;">{{ error_message }}</p>
    {% endif %}
    <div style="text-align: center;">
            {% set room_id = 1 %}
            {% set room_state = room_states.get(room_id) %}
            <button 
                class="arena-button room{{ room_id }}" 
                onclick="window.location.href='/arena/arena_setup?room_id={{ room_id }}'"
                {% if room_state == 'busy' %}disabled{% endif %}
            >
                {% if room_state == 'busy' %}
                    Busy
                {% elif room_state == 'joinable' or room_state == 'init' %}
                    Join Room
                {% elif room_state == 'setup' %}
                    Initializing
                {% elif room_state == 'empty' %}
                    Create Room
                {% endif %}
            </button>
            {% if 1 == 0 %}
            <div style="display: flex; justify-content: center;">
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=empty'">empty</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=init'">init</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=joinable'">joinable</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=busy'">busy</button>
            </div>
            {% endif %}
            {% set room_id = 2 %}
            {% set room_state = room_states.get(room_id) %}
            <button 
                class="arena-button room{{ room_id }}" 
                onclick="window.location.href='/arena/arena_setup?room_id={{ room_id }}'"
                {% if room_state == 'busy' %}disabled{% endif %}
            >
                {% if room_state == 'busy' %}
                    Busy
                {% elif room_state == 'joinable' or room_state == 'init' %}
                    Join Room
                {% elif room_state == 'setup' %}
                    Initializing
                {% elif room_state == 'empty' %}
                    Create Room
                {% endif %}
            </button>
            {% if 1 == 0 %}
            <div style="display: flex; justify-content: center;">
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=empty'">empty</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=init'">init</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=joinable'">joinable</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=busy'">busy</button>
            </div>
            {% endif %}
            {% set room_id = 3 %}
            {% set room_state = room_states.get(room_id) %}
            <button 
                class="arena-button room{{ room_id }}" 
                onclick="window.location.href='/arena/arena_setup?room_id={{ room_id }}'"
                {% if room_state == 'busy' %}disabled{% endif %}
            >
                {% if room_state == 'busy' %}
                    Busy
                {% elif room_state == 'joinable' or room_state == 'init' %}
                    Join Room
                {% elif room_state == 'setup' %}
                    Initializing
                {% elif room_state == 'empty' %}
                    Create Room
                {% endif %}
            </button>
            {% if 1 == 0 %}
            <div style="display: flex; justify-content: center;">
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=empty'">empty</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=init'">init</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=joinable'">joinable</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=busy'">busy</button>
            </div>
            {% endif %}
            {% set room_id = 4 %}
            {% set room_state = room_states.get(room_id) %}
            <button 
                class="arena-button room{{ room_id }}" 
                onclick="window.location.href='/arena/arena_setup?room_id={{ room_id }}'"
                {% if room_state == 'busy' %}disabled{% endif %}
            >
                {% if room_state == 'busy' %}
                    Busy
                {% elif room_state == 'joinable' or room_state == 'init' %}
                    Join Room
                {% elif room_state == 'setup' %}
                    Initializing
                {% elif room_state == 'empty' %}
                    Create Room
                {% endif %}
            </button>
            {% if 1 == 0 %}
            <div style="display: flex; justify-content: center;">
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=empty'">empty</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=init'">init</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=joinable'">joinable</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=busy'">busy</button>
            </div>
            {% endif %}
            {% set room_id = 5 %}
            {% set room_state = room_states.get(room_id) %}
            <button 
                class="arena-button room{{ room_id }}" 
                onclick="window.location.href='/arena/arena_setup?room_id={{ room_id }}'"
                {% if room_state == 'busy' %}disabled{% endif %}
            >
                {% if room_state == 'busy' %}
                    Busy
                {% elif room_state == 'joinable' or room_state == 'init' %}
                    Join Room
                {% elif room_state == 'setup' %}
                    Initializing
                {% elif room_state == 'empty' %}
                    Create Room
                {% endif %}
            </button>
            {% if 1 == 0 %}
            <div style="display: flex; justify-content: center;">
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=empty'">empty</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=init'">init</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=joinable'">joinable</button>
                <button onclick="window.location.href='/arena/update_room_state?room_id={{ room_id }}&state=busy'">busy</button>
            </div>
            {% endif %}
    </div>
    <h2>Users in Arena Rooms:</h2>
    <p> Blue: {{ users1 }}
    Red: {{ users2 }}
    Purple: {{ users3 }}
    Orange: {{ users4 }}
    Green: {{ users5 }}</p>
    <h2>Users in Arena Lobby:</h2>
    <ul id="user-list">
        {% for user in users %}
            <li>{{ user.username }}</li>
        {% endfor %}
    </ul>
    <br>
    <button onclick="window.location.href='/admin/show_live_scores'" style="background-color: #5e2370; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Show Live Scores</button>
    <script>
        setInterval(function() {
            location.reload();
        }, 15000); // Reload every 15 seconds
    </script>
</body>
</html>
